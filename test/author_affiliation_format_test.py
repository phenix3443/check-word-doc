#!/usr/bin/env python3
"""
ä½œè€…å•ä½æ ¼å¼æµ‹è¯•

æµ‹è¯•ä½œè€…å•ä½çš„æ ¼å¼è§„åˆ™ï¼š
- æ ¼å¼ï¼šå•ä½/æœºæ„ï¼ŒåŸå¸‚  é‚®ç¼–
- å•ä½å’Œæœºæ„ä¹‹é—´ç”¨ / åˆ†éš”
- æœºæ„å’ŒåŸå¸‚ä¹‹é—´ç”¨ä¸­æ–‡é€—å·åˆ†éš”
- åŸå¸‚å’Œé‚®ç¼–ä¹‹é—´æœ‰ä¸¤ä¸ªç©ºæ ¼
- é‚®ç¼–æ˜¯6ä½æ•°å­—
- æ— è®ºå•ä½œè€…è¿˜æ˜¯å¤šä½œè€…ï¼Œæ ¼å¼éƒ½ä¸€æ ·
"""

import re

def test_affiliation_format():
    """æµ‹è¯•ä½œè€…å•ä½æ ¼å¼"""
    
    print("=" * 80)
    print("ä½œè€…å•ä½æ ¼å¼æµ‹è¯•")
    print("=" * 80)
    print()
    
    # æµ‹è¯•ç”¨ä¾‹
    test_cases = [
        {
            "name": "åœºæ™¯1ï¼šæ ‡å‡†æ ¼å¼ï¼ˆæ­£ç¡®ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084",
            "expected": True
        },
        {
            "name": "åœºæ™¯2ï¼šæ ‡å‡†æ ¼å¼ï¼ˆæ­£ç¡®ï¼‰",
            "text": "åŒ—äº¬å¤§å­¦/ä¿¡æ¯ç§‘å­¦æŠ€æœ¯å­¦é™¢ï¼ŒåŒ—äº¬  100871",
            "expected": True
        },
        {
            "name": "åœºæ™¯3ï¼šæ ‡å‡†æ ¼å¼ï¼ˆæ­£ç¡®ï¼‰",
            "text": "ä¸­å›½ç§‘å­¦é™¢/è®¡ç®—æŠ€æœ¯ç ”ç©¶æ‰€ï¼ŒåŒ—äº¬  100190",
            "expected": True
        },
        {
            "name": "åœºæ™¯4ï¼šç¼ºå°‘æ–œæ ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084",
            "expected": False
        },
        {
            "name": "åœºæ™¯5ï¼šä½¿ç”¨è‹±æ–‡é€—å·ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»,åŒ—äº¬  100084",
            "expected": False
        },
        {
            "name": "åœºæ™¯6ï¼šåªæœ‰1ä¸ªç©ºæ ¼ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬ 100084",
            "expected": False
        },
        {
            "name": "åœºæ™¯7ï¼š3ä¸ªç©ºæ ¼ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬   100084",
            "expected": False
        },
        {
            "name": "åœºæ™¯8ï¼šé‚®ç¼–ä¸æ˜¯6ä½ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  10008",
            "expected": False
        },
        {
            "name": "åœºæ™¯9ï¼šé‚®ç¼–åŒ…å«éæ•°å­—ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  10008A",
            "expected": False
        },
        {
            "name": "åœºæ™¯10ï¼šç¼ºå°‘åŸå¸‚ï¼ˆé”™è¯¯ï¼‰",
            "text": "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼Œ100084",
            "expected": False
        },
    ]
    
    # æ­£åˆ™è¡¨è¾¾å¼ï¼šå•ä½/æœºæ„ï¼ŒåŸå¸‚  é‚®ç¼–
    # ä½¿ç”¨ [^\s]+ ç¡®ä¿åŸå¸‚åç§°ä¸åŒ…å«ç©ºæ ¼ï¼Œä»è€Œä¿è¯æ°å¥½æ˜¯2ä¸ªç©ºæ ¼
    pattern = r"^.+/.+ï¼Œ[^\s]+\s{2}\d{6}$"
    
    print("ğŸ“‹ æ ¼å¼æµ‹è¯•ç”¨ä¾‹ï¼š")
    print()
    print(f"æ­£åˆ™è¡¨è¾¾å¼: {pattern}")
    print("è¯´æ˜: å•ä½/æœºæ„ï¼ŒåŸå¸‚  é‚®ç¼–ï¼ˆ2ä¸ªç©ºæ ¼ï¼Œ6ä½æ•°å­—é‚®ç¼–ï¼‰")
    print()
    
    passed = 0
    failed = 0
    
    for test_case in test_cases:
        text = test_case['text']
        expected = test_case['expected']
        
        # æ£€æŸ¥æ˜¯å¦åŒ¹é…
        match = re.match(pattern, text) is not None
        
        # åˆ¤æ–­ç»“æœ
        is_correct = (match == expected)
        result = "âœ…" if is_correct else "âŒ"
        status = "é€šè¿‡" if is_correct else "å¤±è´¥"
        
        if is_correct:
            passed += 1
        else:
            failed += 1
        
        print(f"{result} {test_case['name']}")
        print(f"   æ–‡æœ¬: '{text}'")
        print(f"   é¢„æœŸ: {'åŒ¹é…' if expected else 'ä¸åŒ¹é…'}, å®é™…: {'åŒ¹é…' if match else 'ä¸åŒ¹é…'}")
        print()
    
    print("=" * 80)
    print(f"æµ‹è¯•ç»“æœ: {passed} é€šè¿‡, {failed} å¤±è´¥")
    print("=" * 80)


def test_format_requirements():
    """æµ‹è¯•æ ¼å¼è¦æ±‚"""
    
    print()
    print("=" * 80)
    print("æ ¼å¼è¦æ±‚è¯¦è§£")
    print("=" * 80)
    print()
    
    print("ğŸ“‹ æ ¼å¼è¦æ±‚ï¼š")
    print()
    print("1. å•ä½å’Œæœºæ„ä¹‹é—´ç”¨ / åˆ†éš”")
    print("   âœ… æ­£ç¡®: æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»")
    print("   âŒ é”™è¯¯: æ¸…åå¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»")
    print()
    
    print("2. æœºæ„å’ŒåŸå¸‚ä¹‹é—´ç”¨ä¸­æ–‡é€—å·åˆ†éš”")
    print("   âœ… æ­£ç¡®: ...ç³»ï¼ŒåŒ—äº¬")
    print("   âŒ é”™è¯¯: ...ç³»,åŒ—äº¬ï¼ˆè‹±æ–‡é€—å·ï¼‰")
    print()
    
    print("3. åŸå¸‚å’Œé‚®ç¼–ä¹‹é—´æœ‰ä¸¤ä¸ªç©ºæ ¼")
    print("   âœ… æ­£ç¡®: åŒ—äº¬  100084ï¼ˆ2ä¸ªç©ºæ ¼ï¼‰")
    print("   âŒ é”™è¯¯: åŒ—äº¬ 100084ï¼ˆ1ä¸ªç©ºæ ¼ï¼‰")
    print("   âŒ é”™è¯¯: åŒ—äº¬   100084ï¼ˆ3ä¸ªç©ºæ ¼ï¼‰")
    print()
    
    print("4. é‚®ç¼–æ˜¯6ä½æ•°å­—")
    print("   âœ… æ­£ç¡®: 100084")
    print("   âŒ é”™è¯¯: 10008ï¼ˆ5ä½ï¼‰")
    print("   âŒ é”™è¯¯: 1000841ï¼ˆ7ä½ï¼‰")
    print("   âŒ é”™è¯¯: 10008Aï¼ˆåŒ…å«å­—æ¯ï¼‰")
    print()
    
    print("5. å®Œæ•´æ ¼å¼")
    print("   æ ¼å¼: å•ä½/æœºæ„ï¼ŒåŸå¸‚  é‚®ç¼–")
    print("   ç¤ºä¾‹: æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084")
    print()
    
    print("=" * 80)


def test_examples():
    """æµ‹è¯•ç¤ºä¾‹"""
    
    print()
    print("=" * 80)
    print("ä½œè€…å•ä½ç¤ºä¾‹")
    print("=" * 80)
    print()
    
    examples = [
        "æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084",
        "åŒ—äº¬å¤§å­¦/ä¿¡æ¯ç§‘å­¦æŠ€æœ¯å­¦é™¢ï¼ŒåŒ—äº¬  100871",
        "ä¸­å›½ç§‘å­¦é™¢/è®¡ç®—æŠ€æœ¯ç ”ç©¶æ‰€ï¼ŒåŒ—äº¬  100190",
        "æµ™æ±Ÿå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢ï¼Œæ­å·  310027",
        "ä¸Šæµ·äº¤é€šå¤§å­¦/ç”µå­ä¿¡æ¯ä¸ç”µæ°”å·¥ç¨‹å­¦é™¢ï¼Œä¸Šæµ·  200240",
    ]
    
    print("ğŸ“Š æ­£ç¡®ç¤ºä¾‹ï¼š")
    print()
    
    for example in examples:
        print(f"   âœ… {example}")
    
    print()
    print("=" * 80)


def test_pattern_breakdown():
    """æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼åˆ†è§£"""
    
    print()
    print("=" * 80)
    print("æ­£åˆ™è¡¨è¾¾å¼åˆ†è§£")
    print("=" * 80)
    print()
    
    pattern = r"^.+/.+ï¼Œ[^\s]+\s{2}\d{6}$"
    
    print(f"å®Œæ•´æ­£åˆ™: {pattern}")
    print()
    print("åˆ†è§£è¯´æ˜:")
    print("   ^         - å­—ç¬¦ä¸²å¼€å§‹")
    print("   .+        - å•ä½åç§°ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼‰")
    print("   /         - æ–œæ åˆ†éš”ç¬¦")
    print("   .+        - æœºæ„åç§°ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼‰")
    print("   ï¼Œ        - ä¸­æ–‡é€—å·")
    print("   [^\\s]+    - åŸå¸‚åç§°ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªéç©ºæ ¼å­—ç¬¦ï¼‰")
    print("   \\s{2}     - æ°å¥½2ä¸ªç©ºæ ¼")
    print("   \\d{6}     - æ°å¥½6ä½æ•°å­—ï¼ˆé‚®ç¼–ï¼‰")
    print("   $         - å­—ç¬¦ä¸²ç»“æŸ")
    print()
    
    print("=" * 80)


def test_single_vs_multiple_authors():
    """æµ‹è¯•å•ä½œè€…vså¤šä½œè€…"""
    
    print()
    print("=" * 80)
    print("å•ä½œè€… vs å¤šä½œè€…")
    print("=" * 80)
    print()
    
    print("ğŸ“‹ æ ¼å¼è¯´æ˜ï¼š")
    print()
    print("âœ… å•ä½œè€…å’Œå¤šä½œè€…ä½¿ç”¨ç›¸åŒçš„æ ¼å¼")
    print()
    print("å•ä½œè€…ç¤ºä¾‹:")
    print("   ä½œè€…: å¼ ä¸‰")
    print("   å•ä½: æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084")
    print()
    print("å¤šä½œè€…ç¤ºä¾‹:")
    print("   ä½œè€…: å¼ ä¸‰Â¹, æå››Â²")
    print("   å•ä½1: æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084")
    print("   å•ä½2: åŒ—äº¬å¤§å­¦/ä¿¡æ¯ç§‘å­¦æŠ€æœ¯å­¦é™¢ï¼ŒåŒ—äº¬  100871")
    print()
    print("ğŸ’¡ æ³¨æ„:")
    print("   - å•ä½æ ¼å¼å®Œå…¨ç›¸åŒ")
    print("   - ä¸éœ€è¦åœ¨å•ä½å‰åŠ ç¼–å·")
    print("   - ä½œè€…åå­—åçš„ä¸Šæ ‡æ•°å­—ä¸å•ä½å¯¹åº”")
    print()
    
    print("=" * 80)


def main():
    """ä¸»å‡½æ•°"""
    test_affiliation_format()
    test_format_requirements()
    test_examples()
    test_pattern_breakdown()
    test_single_vs_multiple_authors()
    
    print()
    print("ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆï¼")
    print()
    print("ğŸ“‹ é…ç½®æ€»ç»“ï¼š")
    print()
    print("è§„åˆ™ r-007: ä½œè€…å•ä½æ ¼å¼")
    print("   æ ¼å¼: å•ä½/æœºæ„ï¼ŒåŸå¸‚  é‚®ç¼–")
    print("   æ­£åˆ™: ^.+/.+ï¼Œ[^\\s]+\\s{2}\\d{6}$")
    print()
    print("æ ¼å¼è¦ç‚¹:")
    print("   1. å•ä½å’Œæœºæ„ä¹‹é—´ç”¨ / åˆ†éš”")
    print("   2. æœºæ„å’ŒåŸå¸‚ä¹‹é—´ç”¨ä¸­æ–‡é€—å·åˆ†éš”")
    print("   3. åŸå¸‚å’Œé‚®ç¼–ä¹‹é—´æœ‰ä¸¤ä¸ªç©ºæ ¼")
    print("   4. é‚®ç¼–æ˜¯6ä½æ•°å­—")
    print("   5. æ— è®ºå•ä½œè€…è¿˜æ˜¯å¤šä½œè€…ï¼Œæ ¼å¼éƒ½ä¸€æ ·")
    print()
    print("æ­£ç¡®ç¤ºä¾‹:")
    print("   âœ… æ¸…åå¤§å­¦/è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ç³»ï¼ŒåŒ—äº¬  100084")
    print("   âœ… åŒ—äº¬å¤§å­¦/ä¿¡æ¯ç§‘å­¦æŠ€æœ¯å­¦é™¢ï¼ŒåŒ—äº¬  100871")
    print()


if __name__ == "__main__":
    main()
