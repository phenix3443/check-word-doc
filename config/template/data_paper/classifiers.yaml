# 数据论文 - 元素识别规则

document:
  classifiers:
    # 1. 论文标题（第一段）
    - class: title
      match:
        type: paragraph
        position:
          type: absolute
          index: 0 # 绝对定位：文档的第 0 个段落

    # 2. 作者区域（复合区域：标题和摘要之间）
    - class: author-section
      match:
        type: paragraph
        position:
          type: relative # 相对定位：相对于 title 和 abstract
          index: (title, abstract) # 开区间：不包含 title 和 abstract 本身
      # 作者区域内的子元素（使用相对定位）
      children:
        # 第一个元素：作者列表（包含逗号或顿号）
        - class: author-list
          match:
            position:
              type: relative # 相对定位：相对于父区域
              index: 0 # 父区域的第一个（0-based）
            pattern: "^.*[,，、].*$"

        # 中间元素：作者单位
        # 位于 author-list 和 corresponding-author 之间
        # 格式：编号. 单位/机构，城市  邮编（多作者）或 单位/机构，城市  邮编（单作者）
        - class: author-affiliation
          match:
            position:
              type: relative # 相对定位：相对于父区域
              index: (author-list, corresponding-author) # 开区间：不包含首尾
            pattern: "^(\\d+\\.\\s+)?.+，.+\\s{2,}.+$" # 可选编号 + 单位 + 逗号 + 城市 + 多个空格 + 邮编

        # 最后一个元素：通信作者（以*开头）
        - class: corresponding-author
          match:
            position:
              type: relative # 相对定位：相对于父区域
              index: -1 # 父区域的最后一个（-1表示倒数第一个）
            pattern: "^\\*.*$"

    # 3. 中文摘要（以"摘要："开头的段落，包含完整摘要内容）
    - class: abstract
      match:
        type: paragraph
        pattern: "^摘要：.*$"

    # 4. 关键词（以"关键词："开头的段落，包含完整关键词列表）
    - class: keywords
      match:
        type: paragraph
        pattern: "^关键词：.*$"

    # 5. 英文标题（紧跟在关键词之后的第一个段落）
    - class: title-en
      match:
        type: paragraph
        position:
          type: next
          class: keywords

    # 6. 英文作者信息（复合结构，位于英文标题和英文摘要之间）
    - class: author-section-en
      match:
        type: paragraph
        position:
          type: relative
          index: (title-en, abstract-en)
      children:
        # 第一个元素：英文作者列表
        - class: author-list-en
          match:
            position:
              type: relative
              index: 0 # 父区域的第一个（0-based）

        # 中间元素：英文作者单位
        # 格式：编号. 单位名称（多作者）或 单位名称（单作者）
        - class: author-affiliation-en
          match:
            position:
              type: relative
              index: (author-list-en, corresponding-author-en)
            pattern: "^(\\d+\\.\\s*)?[A-Z].*$" # 可选编号（编号后可无空格）+ 以大写字母开头的单位名称

        # 最后一个元素：通讯作者邮箱（以*开头）
        - class: corresponding-author-en
          match:
            position:
              type: relative
              index: -1 # 父区域的最后一个（-1表示倒数第一个）

    # 7. 英文摘要（以"Abstract:"开头的段落，包含完整摘要内容）
    - class: abstract-en
      match:
        type: paragraph
        pattern: "^Abstract:.*$"

    # 8. 英文关键词（以"Keywords:"开头的段落，包含完整关键词列表）
    - class: keywords-en
      match:
        type: paragraph
        pattern: "^Keywords:.*$"

    # 7. 引言标题（特殊的一级标题，内容为"引  言"或"概  述"）
    # 位置：紧跟在英文关键词之后
    # 格式："引  言"或"概  述"（中间有空格，前面没有空格，完全匹配）
    - class: heading-introduction
      match:
        type: paragraph
        pattern: "^(引\\s+言|概\\s+述)$"
        position:
          type: next
          class: keywords-en

    # 8. 数据采集和处理方法（一级标题，编号为1）
    # 位置：紧跟在引言之后
    # 格式："1  数据采集和处理方法"（完全匹配）
    - class: heading-data-collection
      match:
        type: paragraph
        pattern: "^1\\s+数据采集和处理方法$"
        position:
          type: next
          class: heading-introduction

    # 9. 数据样本描述（一级标题，编号为2）
    # 位置：紧跟在数据采集和处理方法之后
    # 格式："2  数据样本描述"（完全匹配）
    - class: heading-data-description
      match:
        type: paragraph
        pattern: "^2\\s+数据样本描述$"
        position:
          type: next
          class: heading-data-collection

    # 10. 数据质量控制和评估（一级标题，编号为3）
    # 位置：紧跟在数据样本描述之后
    # 格式："3  数据质量控制和评估"（完全匹配）
    - class: heading-quality-control
      match:
        type: paragraph
        pattern: "^3\\s+数据质量控制和评估$"
        position:
          type: next
          class: heading-data-description

    # 11. 数据价值和保藏计划（一级标题，编号为4）
    # 位置：紧跟在数据质量控制和评估之后
    # 格式："4  数据价值和保藏计划"（完全匹配）
    - class: heading-data-value
      match:
        type: paragraph
        pattern: "^4\\s+数据价值和保藏计划$"
        position:
          type: next
          class: heading-quality-control

    # 12. 数据使用方法和建议（一级标题，编号为5）
    # 位置：紧跟在数据价值和保藏计划之后
    # 格式："5  数据使用方法和建议"（完全匹配）
    - class: heading-usage-method
      match:
        type: paragraph
        pattern: "^5\\s+数据使用方法和建议$"
        position:
          type: next
          class: heading-data-value

    # 13. 数据可用性声明（一级标题，编号为6）
    # 位置：紧跟在数据使用方法和建议之后
    # 格式："6  数据可用性声明"（完全匹配）
    - class: heading-availability
      match:
        type: paragraph
        pattern: "^6\\s+数据可用性声明$"
        position:
          type: next
          class: heading-usage-method

    # 14. 致谢标题（特殊的一级标题，内容为"致  谢"）
    # 位置：紧跟在数据可用性声明之后
    # 格式："致  谢"（中间有空格，前面没有空格，完全匹配）
    - class: heading-acknowledgments
      match:
        type: paragraph
        pattern: "^致\\s+谢$"
        position:
          type: next
          class: heading-availability

    # 15. 数据作者分工职责标题（特殊的一级标题，无编号）
    # 位置：紧跟在致谢之后
    # 格式："数据作者分工职责"（前面没有空格，完全匹配）
    - class: heading-author-contributions
      match:
        type: paragraph
        pattern: "^数据作者分工职责$"
        position:
          type: next
          class: heading-acknowledgments

    # 16. 参考文献标题（特殊的一级标题，固定内容为"参考文献"）
    # 位置：紧跟在数据作者分工职责之后，文档末尾（最后一个一级标题）
    # 格式："参考文献"（前面没有空格，完全匹配）
    - class: heading-references
      match:
        type: paragraph
        pattern: "^参考文献$"
        position:
          type: next
          class: heading-author-contributions
