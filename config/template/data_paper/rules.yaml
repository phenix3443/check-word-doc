# 数据论文 - 内容规则检查

document:
  rules:
    # r-001: 作者单位编号规则
    - id: r-001
      name: 作者单位编号规则
      description: 多个作者时，作者单位必须以数字编号开头
      applies_to: author-affiliation # 应用到哪个 class
      condition:
        # 条件：author-list 中包含多个作者（有逗号或顿号）
        class: author-list
        pattern: ".*[,，、].*"
      check:
        # 检查：author-affiliation 必须以数字开头
        pattern: "^\\d+\\."
      severity: error
      message: "多个作者时，作者单位必须以数字编号开头（如：1. 单位名称）"

    # r-002: 第一作者标记规则
    - id: r-002
      name: 第一作者标记规则
      description: 第一作者的编号后必须有星号
      applies_to: author-list
      check:
        # 检查：包含 数字+星号 的模式
        pattern: "\\d+\\*"
      severity: error
      message: "第一作者的编号后必须有星号（如：王嘉平1*）"

    # r-003: 通信作者标记规则
    - id: r-003
      name: 通信作者标记规则
      description: 通信作者信息必须以星号开头
      applies_to: corresponding-author
      check:
        pattern: "^\\*"
      severity: error
      message: "通信作者信息必须以星号开头"

    # r-004: 作者单位格式规则（多作者）
    - id: r-004
      name: 作者单位格式规则（多作者）
      description: 多个作者时，单位格式必须为"编号. 单位/机构，城市  邮编"
      applies_to: author-affiliation
      condition:
        # 条件：有多个作者（需要编号）
        class: author-list
        pattern: ".*[,，、].*"
      check:
        # 格式：编号. 单位名称，城市  邮编
        # 注意：城市和邮编之间有两个空格
        # 详细说明：
        # - \d+ : 编号（1, 2, 3...）
        # - \. : 点号
        # - \s+ : 至少一个空格
        # - .+ : 单位/机构名称（不能为空）
        # - ， : 中文逗号
        # - .+ : 城市名称（不能为空）
        # - \s{2,} : 至少两个空格
        # - \d{6} : 6位邮编
        pattern: "^\\d+\\.\\s+.+，.+\\s{2,}\\d{6}$"
      severity: error
      message: "作者单位格式错误，应为：编号. 单位/机构，城市  邮编（注意：城市和邮编之间有两个空格）"

    # r-005: 作者单位格式规则（单作者）
    - id: r-005
      name: 作者单位格式规则（单作者）
      description: 单个作者时，单位格式必须为"单位/机构，城市  邮编"（无编号）
      applies_to: author-affiliation
      condition:
        # 条件：只有一个作者（不需要编号）
        class: author-list
        pattern: "^[^,，、]+$"
      check:
        # 格式：单位名称，城市  邮编（无编号）
        # 注意：城市和邮编之间有两个空格
        pattern: "^[^\\d].+，.+\\s{2,}\\d{6}$"
      severity: error
      message: "作者单位格式错误，应为：单位/机构，城市  邮编（注意：城市和邮编之间有两个空格，无需编号）"
